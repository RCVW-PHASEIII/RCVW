<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.16">
<meta name="description" content="Steps for Building GPSD from source">
<meta name="keywords" content="GPSD, GPS, installation">
<title>Building GPSD from source</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;-webkit-tap-highlight-color:transparent}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<style>

/* gpsd CSS customization. */
#header > h1:first-child,
body {
  color: #000;
}

.sidebarblock,
#toc.toc2 {
  background: #f8f8f8;
  border: 1px dashed #999;
}

.sidebarblock {
  display: inline-block;
  float: left;
  margin-right: 20px;
  margin-bottom: 20px;
}

#toctitle {
  display: none;
}

#content #toc.toc {
  background: inherit;
  border: none;
  padding: 0em;
}

#header,
#content,
#footnotes,
#footer {
  max-width: initial;
}

@media screen and (min-width: 768px) {
  body {
    --left-col: 15em;
  }

  #content #Menu {
    border: 1px dashed #999;
    bottom: 2px;
    left: 2px;
    margin: 0 20px 20px 0;
    position: absolute;
    top: 2px;
    width: var(--left-col);
  }

  #content #preamble,
  #content .sect1 {
    margin-left: calc(var(--left-col) + 22px);
  }
}
</style>
</head>
<body class="article">
<div id="header">
<h1>Building GPSD from source</h1>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div id="Menu" class="sidebarblock">
<div class="content">
<div class="paragraph">
<p><span class="image"><img src="gpsd-logo-small.png" alt="Small gpsd Logo" width="105" height="126"></span><br>
<a href="index.html">Home</a><br>
<a href="faq.html">FAQ</a><br>
<a href="xgps-sample.html">Screenshots</a><br>
<a href="hardware.html">Hardware</a><br>
<a href="for-vendors.html">For GPS Vendors</a><br>
<a href="wishlist.html">Wish List</a><br>
<a href="hall-of-shame.html">Hall of Shame</a><br>
<a href="troubleshooting.html">Troubleshooting Guide</a><br>
<a href="hacking.html">Hacker&#8217;s Guide</a><br>
<a href="references.html">References</a><br>
<a href="protocol-transition.html">Application Compatibility</a><br>
<a href="history.html">History</a><br>
<a href="future.html">Future</a><br></p>
</div>
<hr>
<div id="toc" class="toc">
<div id="toctitle" class="title">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_quick_start">Quick start</a></li>
<li><a href="#_supported_platforms">Supported platforms</a></li>
<li><a href="#_check_your_build_prerequisites">Check your build prerequisites</a>
<ul class="sectlevel2">
<li><a href="#_c_compiler">C compiler</a></li>
<li><a href="#_python">Python</a></li>
<li><a href="#_scons">Scons</a></li>
<li><a href="#_optional_build_components">Optional build components</a></li>
</ul>
</li>
<li><a href="#_how_to_build_the_software_from_source">How to build the software from source</a>
<ul class="sectlevel2">
<li><a href="#_setting_prefix_and_customizing_install_locations">Setting prefix and customizing install locations</a></li>
<li><a href="#_specifiying_locations_for_prerequisites">Specifiying locations for prerequisites</a></li>
<li><a href="#_gentoo_build_and_installation">Gentoo Build and Installation</a></li>
</ul>
</li>
<li><a href="#_apple_desktop">Apple Desktop</a>
<ul class="sectlevel2">
<li><a href="#_special_notes_for_macos_x_build_and_installation">Special Notes for macOS X Build and Installation</a></li>
<li><a href="#_special_notes_for_os_x_build_and_installation">Special Notes for OS X Build and Installation</a></li>
</ul>
</li>
<li><a href="#_special_notes_for_raspberry_pi_build_and_installation">Special Notes for Raspberry Pi Build and Installation</a>
<ul class="sectlevel2">
<li><a href="#_raspbian">Raspbian</a></li>
<li><a href="#_other_debian_derivatives_including_stock">Other Debian derivatives (including stock)</a></li>
</ul>
</li>
<li><a href="#_bsd_derivatives">BSD derivatives</a>
<ul class="sectlevel2">
<li><a href="#_special_notes_for_freebsd_build_and_installation">Special Notes for FreeBSD Build and Installation</a></li>
<li><a href="#_special_notes_for_netbsd_8_1_build_and_installation">Special Notes for NetBSD 8.1 Build and Installation</a></li>
<li><a href="#_special_notes_for_openbsd_6_6_and_7_x_build_and_installation">Special Notes for OpenBSD 6.6 and 7.x Build and Installation</a></li>
<li><a href="#_openbsd_7_2">OpenBSD 7.2</a></li>
</ul>
</li>
<li><a href="#_special_notes_for_fedora_derivatives">Special Notes for Fedora derivatives</a>
<ul class="sectlevel2">
<li><a href="#_special_notes_for_fedora_32_to_33_build_and_installation">Special Notes for Fedora 32 to 33, Build and Installation</a></li>
<li><a href="#_special_notes_for_centos_7_build_and_installation">Special Notes for CentOS 7 Build and Installation</a></li>
</ul>
</li>
<li><a href="#_leap_seconds">Leap Seconds</a></li>
<li><a href="#_optional_features">Optional features</a></li>
<li><a href="#_port_and_toolchain_testing">Port and toolchain testing</a>
<ul class="sectlevel2">
<li><a href="#_regenerating_regression_tests">Regenerating regression tests</a></li>
</ul>
</li>
<li><a href="#_reverting_to_a_clean_state">Reverting to a clean state</a></li>
<li><a href="#_notes_on_android">Notes on Android:</a></li>
<li><a href="#_cross_building">Cross-building</a></li>
<li><a href="#_autostarting_the_daemon">Autostarting the daemon</a></li>
</ul>
</div>
<hr>
<div class="paragraph">
<p><a href="http://www.catb.org/hacker-emblem/"><span class="image"><img src="glider.png" alt="hacker emblem" width="55" height="55"></span></a><br>
<br>
<a href="https://validator.w3.org/check/referer"><span class="image"><img src="html5.png" alt="Valid HTML 5" width="88" height="31"></span></a></p>
</div>
</div>
</div>
<div class="paragraph">
<p>This is a guide to building GPSD from a bare source tree.  It includes
guidance on how to cross-build the package.</p>
</div>
<div class="paragraph">
<p>Some hints for people building binary packages are in
packaging/README.PACKAGERS.</p>
</div>
<div class="paragraph">
<p>(This file is marked up in asciidoc.)</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_quick_start"><a class="link" href="#_quick_start">Quick start</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can download the most recent development snapshot from:
<a href="https://gitlab.com/gpsd/gpsd/tree/master" class="bare">https://gitlab.com/gpsd/gpsd/tree/master</a></p>
</div>
<div class="paragraph">
<p>You can download the latest gpsd tarball from:
<a href="http://download.savannah.gnu.org/releases/gpsd/" class="bare">http://download.savannah.gnu.org/releases/gpsd/</a></p>
</div>
<div class="paragraph">
<p>Under Linux, assuming you have all your build prerequisites in place,
these lines will do, and need to be run as root:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>tar -xzf gpsd-X.YY.tar.gz
cd gpsd-X.YY
scons &amp;&amp; scons check &amp;&amp; scons udev-install</pre>
</div>
</div>
<div class="paragraph">
<p>If you get any errors, you need to read the detailed instructions that follow.</p>
</div>
<div class="paragraph">
<p>If 'scons' fails, it is possible that your target system has moved to
Python 3 and removed the program 'python'.  Python.org says that if
you have an installed Python, there should be a program in your path
called 'python'.  This is specified in PEP 394.  This rule is not always
followed.  You can work around this by linking python3 to python like
this</p>
</div>
<div class="literalblock">
<div class="content">
<pre>ln -s /usr/bin/python3 /usr/bin/python</pre>
</div>
</div>
<div class="paragraph">
<p>Both 'scons' and 'gpsd' work fine on either Python 2 or Python 3.  Which
python you have installed should be transparent to the user, if python
is installed correctly.</p>
</div>
<div class="paragraph">
<p>Occasionally, builds may fail in completely bizarre ways due to a
corrupted scons database.  This seems to relate to ^Cing the build at
an inopportune moment.  If you suspect that, see "Reverting to a clean
state" below and then try again.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_supported_platforms"><a class="link" href="#_supported_platforms">Supported platforms</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Native-build success should be expected on the following platforms,
provided you have the prerequisites listed in the next section
installed:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Any desktop or server Linux distribution.</p>
</li>
<li>
<p>OpenWRT and derivatives such as CeroWRT.</p>
</li>
<li>
<p>FreeBSD, NetBSD, OpenBSD</p>
</li>
<li>
<p>Android, using the official Google toolchain from the NDK</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>We consider failure to build and function on any of these platforms a
serious bug; if you encounter it, please complain on the development
list &lt;<a href="mailto:gpsd-dev@nongnu.org">gpsd-dev@nongnu.org</a>&gt;.</p>
</div>
<div class="paragraph">
<p>Port difficulty to any system conforming to POSIX-2001.1 should be minimal.</p>
</div>
<div class="paragraph">
<p>A Cygwin port is in progress but not complete.</p>
</div>
<div class="paragraph">
<p>Cross-compilation to embedded Linuxes (in addition to the OpenWRT family)
is usually fairly straightforward. An illustrative build transcript
is included at the end of this file.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_check_your_build_prerequisites"><a class="link" href="#_check_your_build_prerequisites">Check your build prerequisites</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Necessary components for any build:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">C compiler</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">gpsd and client library are written in C</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">scons</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">for executing the build recipe</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Python2.x(x&gt;=6) or 3.y(y&gt;=2)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">for scons and some helper scripts</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>On Gentoo, a basic build only requires this package:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">dev-util/scons</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">for executing the build recipe</p></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="_c_compiler"><a class="link" href="#_c_compiler">C compiler</a></h3>
<div class="paragraph">
<p>C99 conformance is required in the compiler. The C code depends on one
C11 feature (supported by GCC, clang, and pretty much any C compiler
that also speaks C++): anonymous unions.  We could eliminate these,
but the cost would be source-level interface breakage if we have to
move certain structure members in and out of unions.</p>
</div>
<div class="paragraph">
<p>Some portions of the code using shared-memory segments are improved by
the C11 stdatomic.h features for lockless concurrency.  These are: the
SHM export mode in shmexport.c, the code for writing clock corrections
to NTP in ntpshmwrite.c, and the code for reading NTP corrections in
ntpshmread.c. These features have been supported in GCC since 4.7 and
clang since 3.1.</p>
</div>
<div class="paragraph">
<p>GPSD is normally built and tested with GCC. Do not compile with a version
older than 4.1.1; there are several known issues with older versions,
including (a) non-standards-conformant floating-point generation that
messes up regression testing, (b) a compiler bug affecting RTCM2 code
generation, (c)  the option -Wno-missing-field-initializers is
unavailable, leading to a flood of warnings (this is due to generated
code and cannot be fixed).</p>
</div>
<div class="paragraph">
<p>clang produces a gpsd that passes all regression tests.</p>
</div>
<div class="paragraph">
<p>If you get a build failure including the text "error adding symbols:
DSO missing from command line" or the complaint "ERROR: CC doesn&#8217;t
work", you nay have tripped over stale data in the builder&#8217;s
configuration cache.  Clean the directory with "scons -c" then manually
remove .sconsign.*dblite and retry your build.</p>
</div>
</div>
<div class="sect2">
<h3 id="_python"><a class="link" href="#_python">Python</a></h3>
<div class="paragraph">
<p>You will need Python 2.x at minor version 6 or later or Python 3 at
at minor version 3 or later.</p>
</div>
<div class="paragraph">
<p>While Python is required to build GPSD from source (the build uses
some code generators in Python), it is not required to run the service
daemon.  In particular, you can cross-compile onto an embedded system
without having to take Python with you.</p>
</div>
<div class="paragraph">
<p>scons finds the python used for scons separately from the python that
should be used for the target.  It seems to look for the target python
as "python", which as above is supposed to exist per python norms.
However, some packaging systems avoid a bare python, preferring to
bind a program to a particular release as it is built.  On systems
without a "python" command, invoking scons as:
  scons target_python=python3.7
seems to help.</p>
</div>
<div class="paragraph">
<p>You will need both basic Python and (if your package system makes the
distinction) the Python development package used for building C
extensions.  Usually these are called "python" and "python-dev". You
will know you are missing the latter if your compilation fails
because of a missing Python.h.</p>
</div>
<div class="paragraph">
<p>The xgps and xgpsspeed clients will only be installed if these Python
extensions are installed:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">python-gi</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Python bindings for gobject-introspection libraries</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">python-gi-cairo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Python bindings for Cairo toolkit under GI</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>On Gentoo systems those packages are named:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">dev-python/pygobject</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">dev-python/pycairo</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The ubxtool and zerk clients will only be usable in direct-serial mode
if this Python extension is installed:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">pyserial</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Python Serial Port extension</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>On Gentoo systems that package is named:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">dev-python/pyserial</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The *gpsplot( client requires Matplotlib to do its job of creating dynamic
plots.</p>
</div>
<div class="paragraph">
<p>On Gentoo systems that package is named:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">dev-python/matplotlib</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_scons"><a class="link" href="#_scons">Scons</a></h3>
<div class="paragraph">
<p>You will need scons version 2.3.0 (from 2013-03-02) or later to build the code.
(Note that there is no evidence of recent testing of scons older than about 3.1.)</p>
</div>
</div>
<div class="sect2">
<h3 id="_optional_build_components"><a class="link" href="#_optional_build_components">Optional build components</a></h3>
<div class="paragraph">
<p>Having the following optional components on your system will enable
various additional capabilities and extensions:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">C++ compiler</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">allows building libgpsmm C++ wrapper for client library</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Qt 4.53+</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">allows building libQgpsmm C++ wrapper for client library</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">(n)curses</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">curses screen-painting library, used by cgps and gpsmon</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">pps-tools</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">adds support for the KPPS API, for improved timing</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">libusb</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Userspace access to USB devices</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">dbus</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">D-Bus support</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>If you have libusb-1.0.0 or later, the GPSD build will autodetect
this and use it to discover Garmin USB GPSes, rather than groveling
through /proc/bus/usb/devices (which has been deprecated by the
Linux kernel team).</p>
</div>
<div class="paragraph">
<p>On Gentoo systems those packages are named:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">dev-qt/qtcore</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Basic Qt</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">dev-qt/qtnetwork</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Qt network components</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sys-libs/ncurses</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">curses screen-painting library, used by cgps and gpsmon</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">net-misc/pps-tools</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">adds support for the KPPS API, for improved timing</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">virtual/libusb</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Userspace access to USB devices</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sys-apps/dbus</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">D-Bus</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Debian/Ubuntu, and Fedora/RHEL, derived systems often split packages
into binary, and development packages. Raspbian is Debian derived. This
does not apply to Gentoo derived systems.</p>
</div>
<div class="paragraph">
<p>These development packages usually have a "-dev" suffix. Installing the
development package usually installs the binary package for you.</p>
</div>
<div class="paragraph">
<p>The development Debian/Ubuntu/Raspbian pacakages are:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">libncurses5-dev</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">curses screen-painting library, used by cgps and gpsmon</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">libusb-1.0-0-dev</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">userspace USB programming library development files</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">libdbus-1-dev</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">D-Bus Development package</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The development Fedora/RHEL packages are:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ncurses-devel</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">curses screen-painting library, used by cgps and gpsmon</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>You can build libQgpsmm if you have Qt (specifically QtCore and
QtNetwork modules) version 4.5.3 or higher.  You will also need a C++
compiler supported by Qt (tested on GCC 4.4.0/mingw on Windows and GCC
4.1.2 on linux). Please refer to Qt&#8217;s documentation at
<a href="http://qt.nokia.com/doc/4.6/platform-specific.html" class="bare">http://qt.nokia.com/doc/4.6/platform-specific.html</a> for platform
specific building documentation</p>
</div>
<div class="paragraph">
<p>Depending on how your distribution packages ncurses you may also require
libtinfo5, a separate terminfo library.</p>
</div>
<div class="paragraph">
<p>On some older versions of Ubuntu (notably 11.10) there is a packaging
defect that may cause your build to blow up in SCons. It&#8217;s a missing
package info file for the tinfo library. To fix this, install the file
packaging/tinfo.pc in /usr/lib/pkgconfig/tinfo.pc. 13.10 fixed this.</p>
</div>
<div class="paragraph">
<p>If your kernel provides the RFC 2783 KPPS (kernel PPS) API, gpsd will
use that for extra accuracy. Many Linux distributions have a package
called "pps-tools" that will install KPPS support and the timepps.h
header file.  We recommend you do that.  If your kernel is built in
the normal modular way, this package installation will suffice.</p>
</div>
<div class="paragraph">
<p>For building from the source tree, or if you change the man page source,
Asciidoctor is to generate nroff -man source from asciidoc markup.  The
following packages are used in this process:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">asciidoctor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Documentation front end with light markup</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>If both are present, then AsciiDoctor is preferred.</p>
</div>
<div class="paragraph">
<p>On Gentoo systems this packages is named:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">dev-ruby/asciidoctor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Documentation front end with light markup</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The build degrades gracefully in the absence of any of these. You should
be able to tell from scons messages which extensions you will get.</p>
</div>
<div class="paragraph">
<p>Under Ubuntu and most other Debian-derived distributions, an easy way
to pick up the prerequisites is: "apt-get build-dep gpsd".  Note
that your sources.list will need "deb-src" lines for this, not
just "deb" lines.</p>
</div>
<div class="paragraph">
<p>If you are custom-building a Linux kernel for embedded deployment, you
will need some subset of the following modules:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">pl2303</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prolific Technology, Inc. PL2303 Serial Port</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ftdi_sio</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">FTDI 8U232AM / FT232</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">cypress_m8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">M8/CY7C64013</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">cp210x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cygnal Integrated Products devices</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">garmin_gps</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Garmin USB mice including GPS-18</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">cdc_am</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">USB Communication Device Class Abstract Control Model interface</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">pps-gpio</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">For KPPS support on ARM systems</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">pps-ldisc</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">For KPPS support with RS-232 ports</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">pps_parport</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">For KPPS support with a parallel port</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>These are listed in rough order of devices covered as of 2013; the
PL23203 by itself accounts for over 70% of deployed USB mice.  We
recommend building with pl2303, ftdi_sio, cypress_m8, and cp210x.</p>
</div>
<div class="paragraph">
<p>We&#8217;ve received a bug report that suggests the Python test framework
requires legacy PTY support (CONFIG_LEGACY_PTYS) from the Linux
kernel.  You should make sure you&#8217;re in the 'dialout' group in order
to have permission to use these devices.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_build_the_software_from_source"><a class="link" href="#_how_to_build_the_software_from_source">How to build the software from source</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>To build gpsd for your host platform from source, simply call 'scons'
in a working-directory copy. (Cross-build is described in a later
section.)</p>
</div>
<div class="paragraph">
<p>To clean the built files, run 'scons -c' or 'scons --clean'.
Run 'rm -f .sconsign.*dblite' to clear the scons
database.  Doing both should return your working directory to a
near pristine state as far as building is concerned.  Some user created
files may remain, and source code changes will not have been reverted..</p>
</div>
<div class="paragraph">
<p>When in doubt, restart with a clean copy of the source.</p>
</div>
<div class="paragraph">
<p>You can specify the installation prefix, as for an autotools build, by
running "scons prefix=&lt;installation_root&gt;". The default value is
"/usr/local".  The environment variable DESTDIR also works in the
usual way.</p>
</div>
<div class="paragraph">
<p>If your linker run fails with missing math symbols, see the FIXME
comment relating to implicit_links in the scons recipe; you probably
need to build with implicit_link=no.  If this happens, please report
your platform, ideally along with a way of identifying it from Python,
to the GPSD maintainers.</p>
</div>
<div class="paragraph">
<p>After building, please run 'scons check' to test the correctness
of the build.  It is not necessary to install first.  Python is
required for regression tests. If any of the tests fail, you probably
have a toolchain issue.  The most common such problem is failures of
strict C99 conformance in floating-point libraries.</p>
</div>
<div class="paragraph">
<p>Once you have verified that the code is working, "scons install"
will install it in the system directories. "scons uninstall" will
undo this. Note: because scons is a single-phase build system, this
may recompile everything. If you want feature-configuration options,
you need to specify them here.</p>
</div>
<div class="paragraph">
<p>To enable hotplugging of USB GPSes under Linux, you may do 'scons
udev-install' to put the appropriate udev rules and wrapper files in
place.</p>
</div>
<div class="paragraph">
<p>You will need php and php-gd installed to support the PHP web page
generator included with the distribution. To install it, copy the file
'gpsd.php' to your HTML document directory. Then see the
post-installation instructions in INSTALL.adoc for how to configure it.</p>
</div>
<div class="sect2">
<h3 id="_setting_prefix_and_customizing_install_locations"><a class="link" href="#_setting_prefix_and_customizing_install_locations">Setting prefix and customizing install locations</a></h3>
<div class="paragraph">
<p>Adding prefix=/usr/foo will cause scons to install to /usr/foo instead
of the default /usr/local, much as --prefix=/usr/foo works with
autoconf.</p>
</div>
<div class="paragraph">
<p>In addition, there are a number of other scons command-line variables
that can be used to control the location of various install
directories.  Many of these, such as bindir&#8201;&#8212;&#8201;which unsurprisingly
defaults to "bin"&#8201;&#8212;&#8201;are unlikely to be ever used.  Generally, these
can be set to absolute paths or relative paths.  Relative paths are
under prefix.  See SConscript and search for "bindir" to see the list.</p>
</div>
<div class="paragraph">
<p>Some of these variables are typically used to adapt to differing
layout conventions.  For example, pkgsrc would use
docdir=share/doc/gpsd as per-package documentation is placed in
prefix/share/doc/PKGNAME, and mandir=man as man pages are in
prefix/man rather than prefix/share/man.</p>
</div>
<div class="paragraph">
<p>The includedir= argument sets the location to which gpsd&#8217;s include
files (gps.h, libgpsmm.h) are installed.  So using prefix=/usr/foo and
includedir=/usr/bar/include will install everything but includes in
/usr/foo and put the includes in /usr/bar.  This is highly unlikely to
be desired, but given to illustrate the behavior.</p>
</div>
<div class="paragraph">
<p>The includedir=/usr/foo/include argument has no other effects; in
particular it does add -I/usr/foo/include to compilation lines.</p>
</div>
</div>
<div class="sect2">
<h3 id="_specifiying_locations_for_prerequisites"><a class="link" href="#_specifiying_locations_for_prerequisites">Specifiying locations for prerequisites</a></h3>
<div class="paragraph">
<p>This section explains how to configure the build to find
prerequisites.  It can be skipped by those who find that the build
succeeds.</p>
</div>
<div class="paragraph">
<p>Software that is needed to build gpsd may in general be in various
locations.  (While many GNU/Linux users doing a straightforward build
will have all prerequisites in /usr, most other operating systems have
additional software in other than /usr, and even on Linux one may wish
to build a separate copy of gpsd with alternate versions of
prerequisites.)</p>
</div>
<div class="paragraph">
<p>The build will invoke the compiler and linker, so that headers and
libraries in the default compiler and linker search paths will be
found without any additional configuration.</p>
</div>
<div class="paragraph">
<p>In addition, scons will use pkgconfig to find some prerequisites.
These will be found if the pc files are in the default pkgconfig
search path, and the resulting -I and -L flags added to the compile
and link lines.</p>
</div>
<div class="paragraph">
<p>The gpsd scons build scripts also support passing in CPPFLAGS and
LDFLAGS via environment variables, similar to how these are used with
autoconf and almost all other build systems.  As an example,
CPPFLAGS=-I/usr/foo/include will cause -I/usr/foo/include to be added
to compilation lines.</p>
</div>
</div>
<div class="sect2">
<h3 id="_gentoo_build_and_installation"><a class="link" href="#_gentoo_build_and_installation">Gentoo Build and Installation</a></h3>
<div class="paragraph">
<p>A cheat sheet for building gpsd from git source on a freshly installed
Gentoo.  Perform these steps, in order, as root.</p>
</div>
<div class="paragraph">
<p>The '--noreplace' option to 'emerge' prevents reinstalling packages that
are already installed.</p>
</div>
<div class="listingblock">
<div class="content">
<pre># install the required build tools
emerge --noreplace dev-util/scons dev-vcs/git

# optional, to support the KPPS API, for improved timing
emerge --noreplace net-misc/pps-tools

# optional, for cgps and gpsmon
emerge --noreplace sys-libs/ncurses

# optional, for ubxtool and zerl serial port support
emerge --noreplace dev-python/pyserial

# optional, to support Garmin USB devices
emerge --noreplace virtual/libusb

# optional, to support Bluetooth GPS devices
emerge --noreplace net-wireless/bluez

# Skip the following optionals on a minimal system:

# optional, to build man page and html pages
emerge --noreplace dev-ruby/asciidoctor

# Optionals for desktop (X) systems:

# optional, for xgps and xgpsspeed
emerge --noreplace dev-python/pygobject dev-python/pycairo

# optional, for gpsplot
emerge --noreplace dev-python/matplotlib

# D-Bus support
emerge --noreplace sys-apps/dbus

# To build Qt compatible library.
emerge --noreplace dev-qt/qtcore dev-qt/qtnetwork

# "scons check" requires bc
emerge --noreplace sys-devel/bc

# prerequisites now installed

# make a place to keep the source
mkdir -p /usr/local/src/GPSD
cd /usr/local/src/GPSD

# grab a shallow clone of gpsd from git.
git clone --depth 1 https://gitlab.com/gpsd/gpsd.git
cd gpsd

# clean the tree, just in case
scons -c

# build the project
scons

# check the results
scons check

# and install if it looks good
scons install</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_apple_desktop"><a class="link" href="#_apple_desktop">Apple Desktop</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_special_notes_for_macos_x_build_and_installation"><a class="link" href="#_special_notes_for_macos_x_build_and_installation">Special Notes for macOS X Build and Installation</a></h3>
<div class="paragraph">
<p>gpsd will build, install and run on macOs. Install the Xcode application
from the Apple store. Then install Homebrew (<a href="https://brew.sh/" class="bare">https://brew.sh/</a>) to get
all the stuff you need, like git, scons, python, etc.</p>
</div>
<div class="paragraph">
<p>As a normal user, install homebrew, then install scons and asciidoctor.
Installing scons pulls in python3. Brew will become root as needed, so
starting asd a normal user is just security theater.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install.sh)"
$ brew install scons asciidoctor</pre>
</div>
</div>
<div class="paragraph">
<p>Now you need to become root. Make a place for the gpsd source to live,
use git to install it there, then go there.  Build gpsd with "scons",
then install it with "scons install"</p>
</div>
<div class="listingblock">
<div class="content">
<pre># mkdir -p /usr/local/src/GPS
# cd /usr/local/src/GPS
# git clone https://gitlab.com/gpsd/gpsd.git
# cd gpsd
# scons &amp;&amp; scons install</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_special_notes_for_os_x_build_and_installation"><a class="link" href="#_special_notes_for_os_x_build_and_installation">Special Notes for OS X Build and Installation</a></h3>
<div class="paragraph">
<p>gpsd will build, install and run on OS X (osX).  The easiest way to
do so is to first install the MacPorts package.  Follow their install
procedure at: <a href="http://www.macports.org/install.php" class="bare">http://www.macports.org/install.php</a></p>
</div>
<div class="paragraph">
<p>Then use their port command to install scons.  Optionally git if you
want to access the development source.  Optionally install asciidoctor
to build the documentation.</p>
</div>
<div class="listingblock">
<div class="content">
<pre># port install scons
# port install git
# port install asciidoctor</pre>
</div>
</div>
<div class="paragraph">
<p>Currently the osX port does not work with Qt5.  To see the build
failure:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># port install qt5
# scons --config=force qt_versioned=5</pre>
</div>
</div>
<div class="paragraph">
<p>If you have Qt5 installed, and want to avoid the build failure, build
this way:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># scons --config=force qt=no</pre>
</div>
</div>
<div class="paragraph">
<p>While running gpsd, or scons check, you may run out of shared memory
segments.  If so, you will see this error message:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>gpsd:ERROR: shmat failed: Too many open files</pre>
</div>
</div>
<div class="paragraph">
<p>By default OS X allows a very small number of shared segments.  You
can check your allowed maximum number of shared segments, then increase
the maximum number, with these commands:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># sysctl kern.sysv.shmseg=8
kern.sysv.shmseg: 32 -&gt; 8
#   sysctl -a  | fgrep shmseg
kern.sysv.shmseg: 8
# sysctl kern.sysv.shmseg=16
kern.sysv.shmseg: 8 -&gt; 16
#   sysctl -a  | fgrep shmseg
kern.sysv.shmseg: 16</pre>
</div>
</div>
<div class="paragraph">
<p>If you are using a USB based GPS you will likely need the Prolific
PL2303 driver.  You can find it here:
<a href="http://www.prolific.com.tw/US/ShowProduct.aspx?p_id=229&amp;pcid=41" class="bare">http://www.prolific.com.tw/US/ShowProduct.aspx?p_id=229&amp;pcid=41</a></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_special_notes_for_raspberry_pi_build_and_installation"><a class="link" href="#_special_notes_for_raspberry_pi_build_and_installation">Special Notes for Raspberry Pi Build and Installation</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>gpsd</strong> will build, install and run on the Raspberry Pi (RasPi) and Pi 2
using Debian Jessie. Other distributions based on Debian (raspbian, etc)
will work fine as well. The <strong>gpsd</strong> package in Debian Wheezy is known to be
flaky, be sure to update to a new version of gpsd from source.</p>
</div>
<div class="sect2">
<h3 id="_raspbian"><a class="link" href="#_raspbian">Raspbian</a></h3>
<div class="paragraph">
<p>Before compiling gpsd from source, you will need to update your system
as root.  Switching to the latest Raspbian distribution (Buster) is
strongly recommended.</p>
</div>
<div class="listingblock">
<div class="content">
<pre># apt-get update
# apt-get dist-upgrade
# rpi-update
# reboot</pre>
</div>
</div>
<div class="paragraph">
<p>Multiple versions of gpsd can not co-exist on the same system.  You need
to ensure gpsd from a package is not on the system:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># apt purge gpsd</pre>
</div>
</div>
<div class="paragraph">
<p>Then install the required packages:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># apt-get install scons libncurses5-dev python-dev pps-tools
# apt-get install git-core</pre>
</div>
</div>
<div class="paragraph">
<p>Git-core is required to build from a git repository.  pps-tools is for
PPS timing.</p>
</div>
<div class="paragraph">
<p>The rest of the installation is just as for any other source based
install, as already described above.</p>
</div>
</div>
<div class="sect2">
<h3 id="_other_debian_derivatives_including_stock"><a class="link" href="#_other_debian_derivatives_including_stock">Other Debian derivatives (including stock)</a></h3>
<div class="sect3">
<h4 id="_bullseye_11"><a class="link" href="#_bullseye_11">Bullseye (11)</a></h4>
<div class="paragraph">
<p>The main difference between Bullseye and Buster (below) is that Python
2 is not in Bullseye by default. It is available. gpsd is Python 3
compatible, so that&#8217;s what we will use on Bullseye.</p>
</div>
<div class="paragraph">
<p>Multiple versions of gpsd can not co-exist on the same system.  You
need to ensure gpsd from a package is not on the system. Also check
for and remove any libgps?? packages.</p>
</div>
<div class="listingblock">
<div class="content">
<pre># dpkg-query -l libgps* gpsd*
.....
# apt purge gpsd libgps28</pre>
</div>
</div>
<div class="paragraph">
<p>Then update your system, and install the packages required by gpsd:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># apt-get update
# apt-get dist-upgrade
# reboot
# apt-get install scons libncurses-dev python-dev pps-tools
# apt-get install git-core
# apt-get install build-essential manpages-dev pkg-config</pre>
</div>
</div>
<div class="paragraph">
<p>If "apt-get install scons &#8230;&#8203;" fails, check the file "/etc/apt/sources.list".</p>
</div>
<div class="paragraph">
<p>Git-core is required to build from a git repository.
pps-tools is for PPS timing.
Build-essential installs the compiler and associated tools.
Manpages-dev is for the associated man pages.
Pkg-config is a helper for scons.</p>
</div>
<div class="paragraph">
<p>Gtk3 is only required to run xgps and xgpsspeed. You do not need a local
X11 server installed, but it still pulls in a lot of packages.</p>
</div>
<div class="listingblock">
<div class="content">
<pre># apt-get install python-gi-dev
# apt-get install libgtk-3-dev</pre>
</div>
</div>
<div class="paragraph">
<p>Ubxtool and zerk may optionally use the pyserial module for
direct connection to the GNSS receiver:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># apt-get install python3-serial</pre>
</div>
</div>
<div class="paragraph">
<p>gpsd may optional connect to dbus with the libdbus package:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># apt-get install libdbus-1-dev</pre>
</div>
</div>
<div class="paragraph">
<p>gpsplot uses matplotlib, which is in the package
python3-matplotlib.</p>
</div>
<div class="listingblock">
<div class="content">
<pre># apt install python3-matplotlib</pre>
</div>
</div>
<div class="paragraph">
<p>Several programs written in Python (xgps, xgpsspeed, etc.) are
installed locally. So if you intend to use them, set your
PYTHONPATH. You may wish to add it to your shell&#8217;s log-in scripts to
make it permanent. For more information on PYTHONPATH, see:
<a href="https://docs.python.org/3/using/cmdline.html#envvar-PYTHONPATH" class="bare">https://docs.python.org/3/using/cmdline.html#envvar-PYTHONPATH</a></p>
</div>
<div class="paragraph">
<p>Something like this, but see the output from the "scons install"
command and other scons commands.</p>
</div>
<div class="listingblock">
<div class="content">
<pre># export PYTHONPATH=${PYTHONPATH}:/usr/local/lib/python3/dist-packages</pre>
</div>
</div>
<div class="paragraph">
<p>Some very old Garmin USB devices need libusb:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># apt-get install libusb-1.0-0-dev</pre>
</div>
</div>
<div class="paragraph">
<p>If you wish to build the documentation, be warned it pulls in a
lot of packages. Build the documentation is a prerequisite to
building the HTML files for the website (www/), and also to make
a source tarball (scons dist). To install the tools to build the
documentation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>apt-get install asciidoctor</pre>
</div>
</div>
<div class="paragraph">
<p>The rest of the installation is just as for any other source based
install:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># git clone https://gitlab.com/gpsd/gpsd.git
# cd gpsd
# scons -c &amp;&amp; scons &amp;&amp; scons check &amp;&amp; scons install</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_buster_10_with_python2"><a class="link" href="#_buster_10_with_python2">Buster (10) with python2</a></h4>
<div class="paragraph">
<p>These Buster instructions seem to also work for Devuan and Maemo Leste.</p>
</div>
<div class="paragraph">
<p>Multiple versions of gpsd can not co-exist on the same system.  You need
to ensure gpsd from a package is not on the system:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># apt purge gpsd libgps23</pre>
</div>
</div>
<div class="paragraph">
<p>Then update your system, and install the packages required by gpsd:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># apt-get update
# apt-get dist-upgrade
# reboot
# apt-get install scons libncurses-dev python-dev pps-tools
# apt-get install git-core
# apt-get install build-essential manpages-dev pkg-config</pre>
</div>
</div>
<div class="paragraph">
<p>If "apt-get install scons" fails, check the file "/etc/apt/sources.list".</p>
</div>
<div class="paragraph">
<p>Git-core is required to build from a git repository.
pps-tools is for PPS timing.
Build-essential installs the compiler and associated tools.
Manpages-dev is for the associated man pages.
Pkg-config is a helper for scons.</p>
</div>
<div class="paragraph">
<p>Gtk3 is only required to run xgps and xgpsspeed.  You do not need a local
X11 server installed, but it still pulls in a lot of packages.</p>
</div>
<div class="listingblock">
<div class="content">
<pre># apt-get install python-gi-dev python-cairo-dev
# apt-get install python-gobject-2-dev libgtk-3-dev</pre>
</div>
</div>
<div class="paragraph">
<p>Ubxtool and zerk may optionally use the pyserial module for
direct connection to the GNSS receiver:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># apt-get install python-serial</pre>
</div>
</div>
<div class="paragraph">
<p>gpsd may optional connect to dbus with the libdbus package:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># apt-get install libdbus-1-dev</pre>
</div>
</div>
<div class="paragraph">
<p>Some very old Garmin USB devices need libusb:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># apt-get install libusb-1.0-0-dev</pre>
</div>
</div>
<div class="paragraph">
<p>If you wish to build the documentation, be warned it pulls in a
lot of packages.  Build the documentation is a prerequisite to
building the HTML files for the website (www/), and also to make
a source tarball (scons dist).  To install the tools to build the
documentation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>apt-get install asciidoctor</pre>
</div>
</div>
<div class="paragraph">
<p>The rest of the installation is just as for any other source based
install:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># git clone https://gitlab.com/gpsd/gpsd.git
# cd gpsd
# scons --config=force &amp;&amp; scons install</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_jessie_8"><a class="link" href="#_jessie_8">Jessie (8)</a></h4>
<div class="paragraph">
<p>Multiple versions of gpsd can not co-exist on the same system.  You need
to ensure gpsd from a package is not on the system:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># apt purge gpsd</pre>
</div>
</div>
<div class="paragraph">
<p>Then install the required packages:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># apt-get install scons libncurses5-dev python-dev pps-tools
# apt-get install git-core</pre>
</div>
</div>
<div class="paragraph">
<p>Git-core is required to build from a git repository.  pps-tools is for
PPS timing.</p>
</div>
<div class="paragraph">
<p>The rest of the installation is just as for any other source based
install, as already described above.</p>
</div>
</div>
<div class="sect3">
<h4 id="_wheezy"><a class="link" href="#_wheezy">Wheezy</a></h4>
<div class="paragraph">
<p>Multiple versions of gpsd can not co-exist on the same system.  You need
to ensure gpsd from a package is not on the system:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># apt purge gpsd</pre>
</div>
</div>
<div class="paragraph">
<p>Wheezy, being older, requires updating the tools for compiling
and testing gpsd:</p>
</div>
<div class="paragraph">
<p>You need scons at 2.3.0 or higher to build.
If your scons is less than 2.3.0 you will need to get a newer scons
from wheezy-backport.  Partial instructions are detailed here:
<a href="https://backports.debian.org/Instructions/" class="bare">https://backports.debian.org/Instructions/</a></p>
</div>
<div class="paragraph">
<p>Basically you need to add this line to /etc/apt/sources.list:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>deb http://http.debian.net/debian wheezy-backports main</pre>
</div>
</div>
<div class="paragraph">
<p>Then do another update:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>apt-get update</pre>
</div>
</div>
<div class="paragraph">
<p>Which may lead you to this error if you lack a full set of debian keys:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>W: GPG error: http://http.debian.net wheezy-backports Release: The following signatures couldn't be verified because the public key is not available: NO_PUBKEY 8B48AD6246925553</pre>
</div>
</div>
<div class="paragraph">
<p>Partial but detailed instructions to fix that are here:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>https://wiki.debian.org/SecureApt</pre>
</div>
</div>
<div class="paragraph">
<p>Use either of the following code blocks.  The first is more robust:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>apt-get install debian-archive-keyring</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>gpg --keyserver pgpkeys.mit.edu --recv 8B48AD6246925553
gpg -a --export 46925553 |  apt-key add -
apt-get update</pre>
</div>
</div>
<div class="paragraph">
<p>You can now install scons from the wheezy-backports repository:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>apt-get -t wheezy-backports install scons</pre>
</div>
</div>
<div class="paragraph">
<p>and other tools:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># apt-get install scons libncurses5-dev python-dev pps-tools
# apt-get install git-core</pre>
</div>
</div>
<div class="paragraph">
<p>Git-core is required to build from a git repository.  pps-tools is for
PPS timing.</p>
</div>
<div class="paragraph">
<p>The rest of the installation is just as for any other source based
install, as described above.</p>
</div>
</div>
<div class="sect3">
<h4 id="_ubuntu_buster_20"><a class="link" href="#_ubuntu_buster_20">Ubuntu Buster 20</a></h4>
<div class="paragraph">
<p>If you have Raspbian Buster, that is not this.</p>
</div>
<div class="paragraph">
<p>Preliminary install notes.</p>
</div>
<div class="paragraph">
<p>Multiple versions of gpsd can not co-exist on the same system.  You need
to ensure gpsd from a package is not on the system:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># apt purge gpsd</pre>
</div>
</div>
<div class="paragraph">
<p>Then install the required packages:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>apt install gcc scons python-gi python-gi-cairo g++
apt install python-gobject libgtk-3-dev
apt install libncurses5-dev libtinfo-dev  pps-tools
apt install gir1.2-gtk-3.0</pre>
</div>
</div>
<div class="paragraph">
<p>At some point Ubuntu renamed "python-gi" to "python3-gi".</p>
</div>
<div class="paragraph">
<p>If you wish to build the documentation, be warned it pulls in a
lot of packages.  Build the documentation is a prerequisite to
building the HTML files for the website (www/), and also to make
a source tarball (scons dist).  To install the tools to build the
documentation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>apt install asciidoctor</pre>
</div>
</div>
<div class="paragraph">
<p>The rest of the installation is just as for any other source based
install, as described above.</p>
</div>
</div>
<div class="sect3">
<h4 id="_ubuntu_18_04_lts"><a class="link" href="#_ubuntu_18_04_lts">Ubuntu 18.04 LTS</a></h4>
<div class="paragraph">
<p>Preliminary install notes.</p>
</div>
<div class="paragraph">
<p>If you have Raspbian Buster, that is not this.</p>
</div>
<div class="paragraph">
<p>Multiple versions of gpsd can not co-exist on the same system.  You need
to ensure gpsd from a package is not on the system:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># apt purge gpsd</pre>
</div>
</div>
<div class="paragraph">
<p>Then install the required packages:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>apt install gcc scons python-gi python-gi-cairo g++
apt install libncurses5-dev libtinfo-dev  pps-tools
apt install gir1.2-gtk-3.0</pre>
</div>
</div>
<div class="paragraph">
<p>If you wish to build the documentation, be warned it pulls in a
lot of packages.  Build the documentation is a prerequisite to
building the HTML files for the website (www/), and also to make
a source tarball (scons dist).  To install the tools to build the
documentation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>apt install asciidoctor</pre>
</div>
</div>
<div class="paragraph">
<p>The rest of the installation is just as for any other source based
install, as described above.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_bsd_derivatives"><a class="link" href="#_bsd_derivatives">BSD derivatives</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_special_notes_for_freebsd_build_and_installation"><a class="link" href="#_special_notes_for_freebsd_build_and_installation">Special Notes for FreeBSD Build and Installation</a></h3>
<div class="paragraph">
<p>gpsd will build, install and run on FreeBSD.
Due to the missing CAN bus support (linux/can.h), NMEA2000/CAN
is not supported on FreeBSD.</p>
</div>
<div class="paragraph">
<p>Use their pkg command to install scons, and optionally git if you
want to access the development source.</p>
</div>
<div class="paragraph">
<p>If you want to build the QT bindings, you&#8217;ll also need the
qt5-network and pkgconf packages.</p>
</div>
<div class="listingblock">
<div class="content">
<pre># pkg install scons
# pkg install git
# ln -s /usr/local/bin/python2.7 /usr/local/bin/python
# ln -s /usr/local/bin/python2.7 /usr/local/bin/python2
# ln -s /usr/local/bin/python3.6 /usr/local/bin/python3
# git clone https://gitlab.com/gpsd/gpsd.git
# cd gpsd
# scons --config=force &amp;&amp; scons install</pre>
</div>
</div>
<div class="paragraph">
<p>OpenBSD names scons differently, and uses a different Python.
On OpenBSD 13.0, you need to do this to install scons and Python:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># pkg install scons-py38
# ln -s /usr/local/bin/python3.8 /usr/local/bin/python3</pre>
</div>
</div>
<div class="paragraph">
<p>FreeBSD fails to create the python links as required by PEP394.
So you need to add them yourself, as above.</p>
</div>
</div>
<div class="sect2">
<h3 id="_special_notes_for_netbsd_8_1_build_and_installation"><a class="link" href="#_special_notes_for_netbsd_8_1_build_and_installation">Special Notes for NetBSD 8.1 Build and Installation</a></h3>
<div class="paragraph">
<p>gpsd will build, install and run on NetBSD.</p>
</div>
<div class="paragraph">
<p>Use their 'pkg_add' command to install pkgin.  Then use pkgin to
install the required tools.</p>
</div>
<div class="listingblock">
<div class="content">
<pre># export PKG_PATH=\
"http://ftp.netbsd.org/pub/pkgsrc/packages/NetBSD/amd64/8.1/All"
# pkg_add -v pkgin
# echo http://ftp.netbsd.org/pub/pkgsrc/packages/NetBSD/amd64/8.1/All &gt; \
   /usr/pkg/etc/pkgin/repositories.conf
# pkgin update
# pkgin install python37 py37-curses
# ln -s /usr/pkg/bin/python3.7 /usr/pkg/bin/python
# ln -s /usr/pkg/bin/python3.7 /usr/pkg/bin/python3
# pkgin install py37-scons
# pkgin install ncurses
# pkgin install openssl mozilla-rootcerts
# mozilla-rootcerts install
# pkgin install git
# git clone https://gitlab.com/gpsd/gpsd.git
# cd gpsd
# scons --config=force &amp;&amp; scons install</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_special_notes_for_openbsd_6_6_and_7_x_build_and_installation"><a class="link" href="#_special_notes_for_openbsd_6_6_and_7_x_build_and_installation">Special Notes for OpenBSD 6.6 and 7.x Build and Installation</a></h3>
<div class="paragraph">
<p>gpsd will build, install and run on OpenBSD.</p>
</div>
<div class="paragraph">
<p>First, update your system. Then all you need for a basic gpsd install is
scons and git. Then create the missing python link.</p>
</div>
<div class="listingblock">
<div class="content">
<pre># syspatch -c
# syspatch
# pkg_add -u
# pkg_add scons
# pkg_add git
# ln -s /usr/local/bin/python2 /usr/local/bin/python</pre>
</div>
</div>
<div class="paragraph">
<p>Yes, OpenBSD 7.0 still uses Python 2.7.</p>
</div>
<div class="paragraph">
<p>Then install the normal way.</p>
</div>
<div class="listingblock">
<div class="content">
<pre># git clone https://gitlab.com/gpsd/gpsd.git
# cd gpsd
# scons --config=force &amp;&amp; scons install</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_openbsd_7_2"><a class="link" href="#_openbsd_7_2">OpenBSD 7.2</a></h3>
<div class="paragraph">
<p>OpenBSD 7.2 may require the linker flag <em>-fPIC</em> in order to completely
build.  Set <em>LDFLAGS="-fPIC"</em>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_special_notes_for_fedora_derivatives"><a class="link" href="#_special_notes_for_fedora_derivatives">Special Notes for Fedora derivatives</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_special_notes_for_fedora_32_to_33_build_and_installation"><a class="link" href="#_special_notes_for_fedora_32_to_33_build_and_installation">Special Notes for Fedora 32 to 33, Build and Installation</a></h3>
<div class="paragraph">
<p>gpsd currently will build, install and run on Fedora 32, to 37.  Any
supported architecture should work.</p>
</div>
<div class="paragraph">
<p>Upgrade your packages, install the gcc compiler and tools. Clone the gpsd
source, and then build it.  Fedora recommends a reboot after using dnf.</p>
</div>
<div class="listingblock">
<div class="content">
<pre># dnf upgrade --refresh
# dnf install -y gcc-c++ python3-devel scons asciidoctor bzip2
# dnf install -y xz git dnf-plugins-core
# git clone https://gitlab.com/gpsd/gpsd.git
# cd gpsd
# scons
# dnf builddep -y buildtmp/packaging/rpm/gpsd.spec
# scons -c
# scons &amp;&amp; scons check &amp;&amp; scons install</pre>
</div>
</div>
<div class="paragraph">
<p>If you wish to make an rpm of your build:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># scons dist
# dnf install -y chrpath fedora-packager rpmdevtools
# rpmdev-setuptree
# cp gpsd-3*.tar.* ~/rpmbuild/SOURCES/
# rpmbuild -ba gpsd-3*/packaging/rpm/gpsd.spec</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_special_notes_for_centos_7_build_and_installation"><a class="link" href="#_special_notes_for_centos_7_build_and_installation">Special Notes for CentOS 7 Build and Installation</a></h3>
<div class="paragraph">
<p>gpsd currently will build, install and run on CentOS 7.</p>
</div>
<div class="paragraph">
<p>Install the gcc compiler and tools.  Install EPEL.</p>
</div>
<div class="paragraph">
<p>Note: there is no EPEL for i386.</p>
</div>
<div class="paragraph">
<p>Use the yum command to install git if you
want to access the development source.</p>
</div>
<div class="listingblock">
<div class="content">
<pre># yum group install "Development Tools"
# yum install git
# yum install \
   https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm
# yum install scons
# yum install python-devel
# yum install ncurses-devel
# yum install pps-tools-devel
# git clone https://gitlab.com/gpsd/gpsd.git
# cd gpsd
# scons</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_leap_seconds"><a class="link" href="#_leap_seconds">Leap Seconds</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>The header gpsd.h contains the value BUILD_LEAPSECONDS.  This is set,
at release time, to the leap second value current at that time.</p>
</div>
<div class="paragraph">
<p>Ideally gpsd would be reading the standard leapseconds.cache file
provided by most distributions for the current leap second.</p>
</div>
<div class="paragraph">
<p>Most of the drivers supply the current leap second, after the GNSS
receiver sends it in a message to gpsd.  But none of the standard NMEA
0183 messages supply the current leap second.  Thus the need for a fall
back leap second value.</p>
</div>
<div class="paragraph">
<p>The leap second value is mainly used to check for invalid UTC time from
the GNSS receiver.  If the receiver is affected by the GPS Week Number
Roll Over (WKNO) bug, then the UTC time it reports will be off by 1024
weeks.</p>
</div>
<div class="paragraph">
<p>All GNSS receivers may be using the wrong leap second internally on
startup. This may happen if it has been less than about 12 minutes since
power-up; the receiver has not yet received the current leapsecond
offset as part of the periodic almanac download.  Page 18, subframe 4,
of the almanac contains the leap second data.</p>
</div>
<div class="paragraph">
<p>The gpsd daemon may be using the wrong leap second internally if
the compiled in leap second is no longer valid, and the GNSS receiver
has not reported the current leap second to gpsd.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_optional_features"><a class="link" href="#_optional_features">Optional features</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>By giving command-line options to scons you can configure certain rarely-used
optional features in, or compile standard features out to reduce gpsd&#8217;s
footprint. "scons --help" will tell the story; look under "Local Options"
and consult the source code if in doubt.</p>
</div>
<div class="paragraph">
<p>Here are a few of the more important feature switches.  Each description
begins with the default for the switch.</p>
</div>
<div class="paragraph">
<p>pps=yes: for small embedded systems and those without threading,
it is possible to build gpsd without thread support if you build
with pps=no.  You&#8217;ll lose support for updating the clock from PPS
pulses.</p>
</div>
<div class="paragraph">
<p>dbus_export=no: for systems using D-Bus: gpsd includes support for
shipping fixes as D-Bus notifications, compiled in by default.  This
may lead to complaint messages during testing  on systems that don&#8217;t
support D-Bus. Build with the option "dbus_export=no" to disable it</p>
</div>
<div class="paragraph">
<p>qt=yes: libQgpsmm is a Qt version of the libgps/libgpsmm
pair. Thanks to the multi-platform approach of Qt, it allows the gpsd
client library to be available on all the Qt supported platforms.
Please see <a href="http://qt.nokia.com/doc/4.6/supported-platforms.html" class="bare">http://qt.nokia.com/doc/4.6/supported-platforms.html</a> for a
status of Qt supported platforms as of version 4.6.</p>
</div>
<div class="paragraph">
<p>minimal=no: people building for extremely constrained environments
may want to set this.  It changes the default for all boolean (feature)
options to false; thus, you get <strong>only</strong> the options you specify on the
command line.  Thus, for example, if you want to turn off all features
except socket export.  Note the nmea0183 driver is always built.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>scons minimal=yes socket_export=yes</pre>
</div>
</div>
<div class="paragraph">
<p>will do that.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>scons minimal=yes gpsd=False gpsdclients=False</pre>
</div>
</div>
<div class="paragraph">
<p>generates only libgps.a</p>
</div>
<div class="listingblock">
<div class="content">
<pre>scons minimal=yes shared=True gpsd=False gpsdclients=False</pre>
</div>
</div>
<div class="paragraph">
<p>generates only libgps.so</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_port_and_toolchain_testing"><a class="link" href="#_port_and_toolchain_testing">Port and toolchain testing</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>'scons check' will run a comprehensive regression-test suite.  You
should do this, at minimum, every time you build from source on a new
machine type.  GPSD does enough bit-twiddling and floating point that
it is very sensitive to toolchain problems; you&#8217;ll want to be sure
those aren&#8217;t going to bite you in production.</p>
</div>
<div class="paragraph">
<p>So that the tests will run fast and be easy to do often, we make the test
framework shove data through the pty and socket layers <strong>way</strong> faster
than would ever occur in production.  If you get regression-test
failures that aren&#8217;t repeatable and look like the test framework is
sporadically failing to feed the last line or two of test loads, try
using the slow=yes option with scons check.  If that fails, try
increasing the delay value via the WRITE_PAD environment variable
(above the value reported in the test output).  If you have to do this,
please report your experience to the GPSD maintainers.</p>
</div>
<div class="paragraph">
<p>Both the builds and the tests are highly parallelizable via the scons
-j option, which can gain a substantial speedup on a multicore machine.
Because the output from the various jobs is interleaved, it may be more
difficult to understand error results with multiple jobs.  In that event,
simply rerun without the -j option for more straightforward output.</p>
</div>
<div class="paragraph">
<p>If coveraging is enabled (coveraging=yes), then Python programs run
during testing are run via Python coveraging.  This prefixes the relevant
commands with the content of the python_coverage option, whose default
value of "coverage run" is appropriate if the standard Python coverage
package is installed and accessible in the command path.  It can be
set to a different value if necessary, or set to the empty string to
disable Python coveraging.  The latter happens automatically (with a
message) if the tool cannot be found.  When running multiple jobs with
"-j", if python_coverage has its default value, "--parallel" is automatically
appended to the command.  With a non-default setting, accommodating
parallelism is the user&#8217;s responsibility.</p>
</div>
<div class="paragraph">
<p>For instructions on how to live-test the software, see the file INSTALL.adoc.</p>
</div>
<div class="sect2">
<h3 id="_regenerating_regression_tests"><a class="link" href="#_regenerating_regression_tests">Regenerating regression tests</a></h3>
<div class="paragraph">
<p>Sometimes, changes are made to code that cause the output to be
different.  Examples are bug fixes and changes to precision.  In these
cases, the regression tests must be updated.  This is dangerous, and
one must guard against the possibility of introducing a bug and
recording that bug&#8217;s output as the desired state.</p>
</div>
<div class="paragraph">
<p>A suggested procedure is</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Create a minimal commit with the breaking change.  Do not include
any other changes.</p>
</li>
<li>
<p>On master, without the new commit, run the regression tests and
verify that they pass.  Do this on a machine with a history of
zero flaky behavior with the regression tests.</p>
</li>
<li>
<p>Apply the minimal commit.</p>
</li>
<li>
<p>Run "scons gps-makeregress".</p>
</li>
<li>
<p>Merge the regression changes into the commit.  Mentiion in the
commit message that regression tests were regenerated.</p>
</li>
<li>
<p>Review the diff for sanity, and if ok, push it.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_reverting_to_a_clean_state"><a class="link" href="#_reverting_to_a_clean_state">Reverting to a clean state</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>The scons equivalent of 'make clean' is 'scons -c' or 'scons
--clean'. This will revert your source tree to a clean state nearly as
though you had just cloned or downloaded it; some scons housekeeping
stuff is left in place.</p>
</div>
<div class="paragraph">
<p>If you interrupted a regression test, 'scons testclean' will remove
generated test programs.</p>
</div>
<div class="paragraph">
<p>If you&#8217;re building in a clone of the git repository, you can use
"git clean -dxf" to remove all untracked files.  Note, however, that
this will remove any files you have created on your own, in addition
to build products and scons temporaries.  You can alternatively use
"git clean -dxn" to see what would be removed without actually removing
anything, or "git clean -dxi" to remove things selectively.  Using
"git clean" after "scons -c" usually results in a fairly short list.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_notes_on_android"><a class="link" href="#_notes_on_android">Notes on Android:</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Samuel Cuella reports:</p>
</div>
<div class="paragraph">
<p>I use the official google toolchain from the Android NDK (Native
Development Kit). You can also use the toolchain from code sourcery I
guess. I cross-compile from a "regular" (with GNU userland) linux box.</p>
</div>
<div class="paragraph">
<p>People who port software from linux to android tend to use either the
NDK or code sourcery&#8217;s.</p>
</div>
<div class="paragraph">
<p>If you are going to include "official" guidelines, I would go for
recommending the official toolchain from the NDK.</p>
</div>
<div class="paragraph">
<p>Here are the scons switches I use:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>scons wordsize=32 snapshot=off arch=arm sample=shell

scons -j3 prefix=/usr libdir=$prefix/lib udevdir=/lib/udev \
  gpsd_user=gpsd gpsd_group=uucp socket_export=1 sirf=1</pre>
</div>
</div>
<div class="paragraph">
<p>With the following environment variables:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>TOOL_HOME=/home/samuel/android-official-last/
export TOOL_PREFIX=${TOOL_HOME}/bin/arm-linux-androideabi
export CXX=$TOOL_PREFIX-g++
export AR=$TOOL_PREFIX-ar
export RANLIB=$TOOL_PREFIX-ranlib
export CC=$TOOL_PREFIX-gcc
export LD=$TOOL_PREFIX-ld

export CCFLAGS="-march=armv7-a -mtune=cortex-a8 -mfpu=vfp"
export ARM_TARGET_LIB=${TOOL_HOME}/sysroot

scons wordsize=32 snapshot=off arch=arm sample=shell</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_cross_building"><a class="link" href="#_cross_building">Cross-building</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>The scons recipe is intended to support cross-building, in particular
for embedded deployment of the software.  A session transcript
illustrating how to do that, with some routine messages suppressed and
replaced with [&#8230;&#8203;], follows.  The script assumes you&#8217;re cloning from the
GPSD project site or a mirror. Notes and explanation follow the transcript.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ git clone [...]
Cloning into gpsd...
[...]
$ cd gpsd</pre>
</div>
</div>
<div class="paragraph">
<p>Edit .scons-options-cache (may not exist) and add lines, describing
what your target architecture and build preferences are.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ cat .scons-option-cache
libgpsmm = False
libQgpsmm = False
python = False
prefix = '/work/buildroot/output/staging/usr/'
sysroot = '/work/buildroot/output/staging/'
target = 'arm-indigo-linux-gnueabi'
$ scons
scons: Reading SConscript files ...
[...]
Altered configuration variables:
libgpsmm = False (default True): build C++ bindings
libQgpsmm = False (default True): build QT bindings
python = False (default True): build Python support and modules.
prefix = /work/buildroot/output/staging/usr/ (default /usr/local): installation directory prefix
sysroot = /work/buildroot/output/staging (default ): cross-development system root
target = arm-indigo-linux-gnueabi (default ): cross-development target
scons: done reading SConscript files.
scons: Building targets ...
[...]
scons: done building targets.
$ file gpsd
gpsd: ELF 32-bit LSB executable, ARM, version 1 (SYSV), dynamically linked (uses shared libs), for GNU/Linux 2.6.36, not stripped</pre>
</div>
</div>
<div class="paragraph">
<p>The author of this transcript notes:</p>
</div>
<div class="paragraph">
<p>The sysroot option tells the compiler and linker to use libraries and
headers from the given path as if they were placed at / prefix. During
this build the option allows linking with target ncurses (with the option
of having more packages at the --sysroot path) and including correct
headers without specifying -I and -L options.</p>
</div>
<div class="paragraph">
<p>In the options cache file gpsd is configured to install to
/work/buildroot/output/staging/usr path, so gpsd clients could be
compiled against libgps.so using /work/buildroot/output/staging as
sysroot option.</p>
</div>
<div class="paragraph">
<p>"arm-indigo-linux-gnueabi" as target means that
arm-indigo-linux-gnueabi-gcc and related tools are available in PATH;
your cross-compiler is likely to have a different target prefix.</p>
</div>
<div class="paragraph">
<p>You may also find it useful to set manbuild=no.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_autostarting_the_daemon"><a class="link" href="#_autostarting_the_daemon">Autostarting the daemon</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>The preferred way to start gpsd is on-demand by a hotplug script
detecting USB device activations.  Look at the gpsd.rules and
gpsd.hotplug files to see how this is accomplished.  Relevant
productions in the build recipe are "udev-install" and
"udev-uninstall"; relevant build options include "udevdir".</p>
</div>
<div class="paragraph">
<p>If you for some reason need to start gpsd unconditionally at
boot time (in particular, if you need to support RS232 devices)
there&#8217;s a model init.d script under packaging/deb and a systemd
setup under systemd/.</p>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2023-01-10 17:38:26 -0500
</div>
</div>
</body>
</html>