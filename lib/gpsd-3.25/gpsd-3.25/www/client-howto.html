<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.16">
<meta name="description" content="This document is a guide to interfacing client applications with GPSD.">
<meta name="keywords" content="time, GPSD, NTP, time, precision, 1PPS, PPS, stratum, jitter">
<meta name="author" content="Eric S. Raymond">
<title>GPSD Client HOWTO</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;-webkit-tap-highlight-color:transparent}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<style>

/* gpsd CSS customization. */
#header > h1:first-child,
body {
  color: #000;
}

.sidebarblock,
#toc.toc2 {
  background: #f8f8f8;
  border: 1px dashed #999;
}

.sidebarblock {
  display: inline-block;
  float: left;
  margin-right: 20px;
  margin-bottom: 20px;
}

#toctitle {
  display: none;
}

#content #toc.toc {
  background: inherit;
  border: none;
  padding: 0em;
}

#header,
#content,
#footnotes,
#footer {
  max-width: initial;
}

@media screen and (min-width: 768px) {
  body {
    --left-col: 15em;
  }

  #content #Menu {
    border: 1px dashed #999;
    bottom: 2px;
    left: 2px;
    margin: 0 20px 20px 0;
    position: absolute;
    top: 2px;
    width: var(--left-col);
  }

  #content #preamble,
  #content .sect1 {
    margin-left: calc(var(--left-col) + 22px);
  }
}
</style>
</head>
<body class="article">
<div id="header">
<h1>GPSD Client HOWTO</h1>
<div class="details">
<span id="author" class="author">Eric S. Raymond</span><br>
<span id="email" class="email">&lt;<a href="mailto:esr@thyrsus.com">esr@thyrsus.com</a>&gt;</span><br>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div id="Menu" class="sidebarblock">
<div class="content">
<div class="paragraph">
<p><span class="image"><img src="gpsd-logo-small.png" alt="Small gpsd Logo" width="105" height="126"></span><br>
<a href="index.html">Home</a><br>
<a href="faq.html">FAQ</a><br>
<a href="xgps-sample.html">Screenshots</a><br>
<a href="hardware.html">Hardware</a><br>
<a href="for-vendors.html">For GPS Vendors</a><br>
<a href="wishlist.html">Wish List</a><br>
<a href="hall-of-shame.html">Hall of Shame</a><br>
<a href="troubleshooting.html">Troubleshooting Guide</a><br>
<a href="hacking.html">Hacker&#8217;s Guide</a><br>
<a href="references.html">References</a><br>
<a href="protocol-transition.html">Application Compatibility</a><br>
<a href="history.html">History</a><br>
<a href="future.html">Future</a><br></p>
</div>
<hr>
<div id="toc" class="toc">
<div id="toctitle" class="title">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_introduction">Introduction</a></li>
<li><a href="#_sensor_behavior_matters">Sensor behavior matters</a></li>
<li><a href="#_what_gpsd_does_and_what_it_cannot_do">What GPSD does, and what it cannot do</a></li>
<li><a href="#_how_the_gpsd_wire_protocol_works">How the GPSD wire protocol works</a></li>
<li><a href="#_interfacing_from_the_client_side">Interfacing from the client side</a>
<ul class="sectlevel2">
<li><a href="#_the_sockets_interface">The sockets interface</a></li>
<li><a href="#_shared_memory_interface">Shared-memory interface</a></li>
<li><a href="#_d_bus_broadcasts">D-Bus broadcasts</a></li>
</ul>
</li>
<li><a href="#_c_examples">C Examples</a></li>
<li><a href="#_c_examples_2">C++ examples</a></li>
<li><a href="#_python_examples">Python examples</a></li>
<li><a href="#_other_client_bindings">Other Client Bindings</a></li>
<li><a href="#_java">Java</a></li>
<li><a href="#_perl">Perl</a></li>
<li><a href="#_backward_incompatibility_and_future_changes">Backward Incompatibility and Future Changes</a></li>
</ul>
</div>
<hr>
<div class="paragraph">
<p><a href="http://www.catb.org/hacker-emblem/"><span class="image"><img src="glider.png" alt="hacker emblem" width="55" height="55"></span></a><br>
<br>
<a href="https://validator.w3.org/check/referer"><span class="image"><img src="html5.png" alt="Valid HTML 5" width="88" height="31"></span></a></p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_introduction"><a class="link" href="#_introduction">Introduction</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>This document is a guide to interfacing client applications with GPSD.
It surveys the available bindings and their use cases.  It also explains
some sharp edges in the client API which, unfortunately, are fundamental
results of the way GPS sensor devices operate, and suggests tactics
for avoiding being cut.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_sensor_behavior_matters"><a class="link" href="#_sensor_behavior_matters">Sensor behavior matters</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>GPSD handles two main kinds of sensors: GPS receivers and AIS
receivers. It has rudimentary support for some other kinds of
specialized geolocation-related sensors as well, notably compass and
yaw/pitch/roll, but those sensors are usually combined with GPS/AIS
receivers and behave like them.</p>
</div>
<div class="paragraph">
<p>In an ideal world, GPS/AIS sensors would be oracles that you could
poll at any time to get clean data. But despite the existence of some
vendor-specific query and control strings on some devices, a GPS/AIS
sensor is not a synchronous device you can query for specified data
and count on getting a response back from in a fixed period of time.
It gets radio data on its own schedule (usually once per second for a
GPS), and emits the reports it feels like reporting asynchronously
with variable lag during the following second.  <strong>If</strong> it supports query
strings, reports from these are intermixed with the regular
reports, and usually scheduled at a lower priority (often with a lag
of more than a second).</p>
</div>
<div class="paragraph">
<p>A GPS/AIS receiver, or any sensor that behaves like one, is in effect
a datagram emitter similar to a UDP data source; you get no guarantees
about sequence or timing at finer resolution than "TPV roughly once
per second" (or whatever the main type of report and report interval
is).</p>
</div>
<div class="paragraph">
<p>The only way to simulate synchronous querying of such a sensor is to
have an agent between you and it that caches the data coming out of
the device; you can then query the agent and expect a reasonably
synchronous response from the cache (we support this for
GPSs). However, note that this doesn&#8217;t work for a freshly opened
device - there&#8217;s no cached data.</p>
</div>
<div class="paragraph">
<p>Consider what this implies for GPses, in particular:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>You can&#8217;t actually poll them. They report to you over a serial
(RS232 or USB-serial) interface at a fixed interval, usually once
per second.</p>
</li>
<li>
<p>They don&#8217;t always have a fix to report, because they can only
get one when they have satellite lock.</p>
</li>
<li>
<p>They may fail to have satellite lock when your skyview is poor.
If you are moving through uneven terrain or anywhere with trees
or buildings, your skyview can degrade in an instant.</p>
</li>
<li>
<p>They may also fail to have lock because they&#8217;re initially powering
on (cold start), or waking from a power-conserving sleep mode (warm
start).  While most modern GPSs with a good skyview can get
satellite lock in 30 seconds from a warm start, a GPS that has
been off for a while can take 15 minutes or more to acquire lock</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Time to fix after a power-on matters because in many use cases for
GPSs they&#8217;re running off a battery, and you can&#8217;t afford to keep them
powered when you don&#8217;t actually need location data.  This is why GPS
sensors are sometimes designed to go to a low-power mode when you close
the serial port they&#8217;re attached to.</p>
</div>
<div class="paragraph">
<p>AIS receivers have a simpler set of constraints. They report
navigational and ID information from any AIS transmitter in line of
sight; there are no skyview issues, and they&#8217;re ready instantly when
powered up. Furthermore, they&#8217;re not normally battery constrained.
However, you don&#8217;t poll them either; they receive information
packets over the air and ship them to you at unpredictable intervals
over a serial port.</p>
</div>
<div class="paragraph">
<p>The design of the GPSD reporting protocol surrenders to reality. Its data
packets translate the GPS&#8217;s stream of datagrams into
device-type-independent datagrams, but it can&#8217;t impose timing and
sequencing regularities on them that the underlying device doesn&#8217;t
already obey.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_what_gpsd_does_and_what_it_cannot_do"><a class="link" href="#_what_gpsd_does_and_what_it_cannot_do">What GPSD does, and what it cannot do</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>GPSD solves some of the problems with GPS/AIS sensors. First:
multiplexing; it allows multiple applications to get sensor data
without having to contend for a single serial device.  Second:
coping with the hideous gallimaufry of badly-designed protocols these
devices use&#8201;&#8212;&#8201;regardless of device type, you will get data in a single
well-documented format.  Third: on operating systems with a hotplug
facility (like Linux udev), GPSD will handle all the device
management as USB devices are plugged in and unplugged.</p>
</div>
<div class="paragraph">
<p>What GPSD can&#8217;t do is pull fix data out of thin air when your
device hasn&#8217;t reported any.  Nor is it a magic power supply,
so its device management has to be designed around keeping the
attached sensors open only when a client application actually
needs a fix.</p>
</div>
<div class="paragraph">
<p>As you&#8217;ll see, these constraints explain most of the design of the GPSD
wire protocol, and of the library APIs your client application
will be using.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_the_gpsd_wire_protocol_works"><a class="link" href="#_how_the_gpsd_wire_protocol_works">How the GPSD wire protocol works</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>While GPSD project ships several library bindings that will hide the
details of the wire protocol from you, you&#8217;ll understand the library APIs
better by knowing what a wire-protocol session looks like. After
reading this section, you can forget the details about commands and
responses and attributes as long as you hold on to the basic
logical flow of a session.</p>
</div>
<div class="paragraph">
<p>Your client library&#8217;s open function is going to connect a socket to
port 2947 on the host your sensors are attached to, usually
localhost. On connection, the gpsd daemon will ship a banner that
looks something like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="json">{"class":"VERSION","release":"2.93","rev":"2010-03-30T12:18:17",
                   "proto_major":3,"proto_minor":2}</code></pre>
</div>
</div>
<div class="paragraph">
<p>There&#8217;s nothing mysterious here. Your server daemon is identifying
itself with information that may allow a client library to work
around bugs or potential incompatibilities produced by upgrades.</p>
</div>
<div class="paragraph">
<p>To get data from the attached sensors, you need to explicitly tell the
daemon you want it.  (Remember that it&#8217;s trying to minimize the amount
of time the devices are held open and in a fully powered state.)  You
do this by issuing a WATCH command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="json">?WATCH={"enable":true,"json":true}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This tells the daemon to watch all devices and to issue reports in
JSON.  It can ship some other protocols as well (notably, NMEA 0183)
but JSON is the most capable and usually what you want.</p>
</div>
<div class="paragraph">
<p>A side effect of the WATCH command is that the daemon will ship you
back some information on available devices.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="json">{"class":"DEVICES","devices":[{"class":"DEVICE","path":"/dev/ttyUSB0",
                   "activated":1269959537.20,"native":0,"bps":4800,"parity":"N",
                   "stopbits":1,"cycle":1.00}]}
{"class":"WATCH","enable":true,"json":true,"nmea":false,"raw":0,
                 "scaled":false,"timing":false,"pps":false}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The DEVICES response tells you what devices are available to the
daemon; this list is maintained in a way you as the application
designer don&#8217;t have to care about.  The WATCH response will
immediately follow and tells you what all your watch request settings
are.</p>
</div>
<div class="paragraph">
<p>Up to this point, nothing has been dependent on the state of the
sensors. At this time, it may well be that none of those devices is
fully powered up yet. In fact, they won&#8217;t be, unless another
GPSD-enabled application is already watching when you open your
connection.  If that&#8217;s the case, you will start seeing data
immediately.</p>
</div>
<div class="paragraph">
<p>For now, though, let&#8217;s go back to the case where gpsd has to fire up
the sensors. After issuing the WATCH response, the daemon opens all of
them and watches for incoming packets that it can recognize.  <strong>After
a variable delay</strong>, it will ship a notification that looks something
like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="json">{"class":"DEVICE","path":"/dev/ttyUSB0","activated":1269960793.97,
                 "driver":"SiRF binary","native":1,"bps":4800,
                 "parity":"N","stopbits":1,"cycle":1.00}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This is the daemon telling you that it has recognized a SiRF binary
GPS on /dev/ttyUSB0 shipping report packets at 4800 bits per second.
This notification is not delayed by the time it takes to achieve
satellite lock; the GPS will cheerfully ship packets before that.  But
it will be delayed by the time required for the daemon to sync up with
the GPS.</p>
</div>
<div class="paragraph">
<p>The GPSD daemon is designed so it doesn&#8217;t have to know anything about the
sensor in advance - not which of a dozen reporting protocols it uses,
and not even the baud rate of the serial device.  The reason for this
agnosticism is so the daemon can adapt properly to anything a hotplug
event night throw at it.  If you unplug your GPS while your
application is running, and then plug in one of a different type, the
daemon will cope.  Your application won&#8217;t know the difference unless
you have told it to notice device types.</p>
</div>
<div class="paragraph">
<p>You can even start your application, have it issue a WATCH, realize
you forgot to plug in a GPS, and do that.  The hotplug event will
tell gpsd, which will add the new device to the watched-devices list
of every client that has issued a ?WATCH.</p>
</div>
<div class="paragraph">
<p>In order to make this work, gpsd has a packet sniffer inside it that
does autobauding and packet-protocol detection. Normally the packet
sniffer will achieve sync in well under a second (my measured times
range from 0.10 to 0.53 sec at 4800bps), but it can take longer if
your serial traffic is degraded by dodgy cables or electrical noise,
or if the GPS is configured to run at an unusual speed/parity/stopbit
configuration.</p>
</div>
<div class="paragraph">
<p>The real point here is that the delay is <strong>variable</strong>.  The client
library, and your application, can&#8217;t assume a neat lockstep of
request and instant response.</p>
</div>
<div class="paragraph">
<p>Once you do get your device(s) synced, things become more predictable.
The sensor will start shipping fix reports at a constant interval,
usually every second, and the daemon will massage them into JSON and
pass them up the client to your application.</p>
</div>
<div class="paragraph">
<p>However, until the sensor achieves satellite lock, those fixes will be
"mode 1" - no valid data (mode 2 is a 2D fix, mode 3 is a 3D fix).
Here&#8217;s what that looks like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="json">{"class":"TPV","device":"/dev/ttyUSB0",
               "time":"2010-04-30T11:47:43.28Z","ept":0.005,"mode":1}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Occasionally you&#8217;ll get another kind of sentence, SKY, that reports a
satellite skyview.  But TPV is the important one.  Here&#8217;s what it
looks like when the sensor has a fix to report:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="json">{"class":"TPV","time":"2010-04-30T11:48:20.10Z","ept":0.005,
               "lat":46.498204497,"lon":7.568061439,"alt":1327.689,
                "epx":15.319,"epy":17.054,"epv":124.484,"track":10.3797,
                "speed":0.091,"climb":-0.085,"eps":34.11,"mode":3}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note the "mode":3 at the end.  This is how you tell that the GPS is
reporting a full 3D fix with altitude.</p>
</div>
<div class="paragraph">
<p>If you have an AIS receiver attached, it too will have been opened
and autobauded and protocol-sniffed after your WATCH.  The stream of
JSON objects will then include things like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="json">{"class":"AIS","type":5,"repeat":0,"mmsi":351759000,"scaled":true,
               "imo":9134270,"ais_version":0,"callsign":"3FOF8",
               "shipname":"EVER DIADEM",
               "shiptype":"Cargo - all ships of this type",
               "to_bow":225,
	       "to_stern":70,"to_port":1,"to_starboard":31,"draught":12.2,
               "epfd":"GPS","eta":"05-15T14:00Z",
	       "destination":"NEW YORK","dte":0}</code></pre>
</div>
</div>
<div class="paragraph">
<p>When your application shuts down, it can cancel its watch:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="json">?WATCH={"enable":false}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will enable the daemon to close devices and conserve
power. Supposing you don&#8217;t do this, the daemon will time out devices
with no listeners, so canceling your watch is not strictly necessary.
But it is good manners.</p>
</div>
<div class="paragraph">
<p>Another way to use the daemon is with the ?POLL command  To do this, issue</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="json">?WATCH={"enable":true}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This activates all devices without enabling streaming of reports.  You
can then say "?POLL;" to poll gpsd&#8217;s recorded data.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="json">?POLL;
{"class":"POLL","time":"2012-04-05T15:00:01.501Z","active":1,
    "tpv":[{"class":"TPV","device":"/dev/ttyUSB0","mode":3,"time":"2012-04-05T15:00:00.000Z","ept":0.005,"lat":40.035083522,"lon":-75.519982905,"alt":166.145,"epx":9.125,"epy":17.778,"epv":34.134,"track":0.0000,"speed":0.000,"climb":0.000,"eps":36.61}],"gst":[{"class":"GST","device":"/dev/ttyUSB0","time":"1970-01-01T00:00:00.000Z","rms":0.000,"major":0.000,"minor":0.000,"orient":0.000,"lat":0.000,"lon":0.000,"alt":0.000}],
     "sky":[{"class":"SKY","device":"/dev/ttyUSB0","time":"2012-04-05T15:00:00.000Z","xdop":0.61,"ydop":1.19,"vdop":1.48,"tdop":1.14,"hdop":1.40,"gdop":2.30,"pdop":1.99,"satellites":[{"PRN":26,"el":15,"az":49,"ss":29,"used":true},{"PRN":18,"el":62,"az":315,"ss":31,"used":true},{"PRN":15,"el":60,"az":43,"ss":44,"used":true},{"PRN":21,"el":71,"az":237,"ss":0,"used":false},{"PRN":27,"el":52,"az":94,"ss":40,"used":true},{"PRN":9,"el":48,"az":136,"ss":33,"used":true},{"PRN":22,"el":21,"az":291,"ss":36,"used":true},{"PRN":3,"el":8,"az":303,"ss":25,"used":true}]}]}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This interface is intended for use with applications like CGI scripts
that cannot wait on output from the daemon but must poke it into responding.</p>
</div>
<div class="paragraph">
<p>If you&#8217;re a clever sort, you&#8217;re already wondering what the daemon does
if the application at the other end of the client socket doesn&#8217;t read data
out of it as fast as gpsd is shipping it upwards.  And the answer is
this: eventually the socket buffer fills up, a write from the daemon
throws an error, and the daemon shuts down that client socket.</p>
</div>
<div class="paragraph">
<p>From the point of view of the application, it reads all the buffered
data and then gets a read return indicating the socket shutdown. We&#8217;ll
return to this in the discussion of client libraries, but the thing
for you to know right now is that this edge case is actually quite
difficult to fall afoul of.  Total data volume on these sockets is not
high. As long as your application checks for and reads socket data no
less often than once a second, you won&#8217;t&#8201;&#8212;&#8201;and a second is a <strong>lot</strong> of
time in which to come back around your main loop.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_interfacing_from_the_client_side"><a class="link" href="#_interfacing_from_the_client_side">Interfacing from the client side</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>The gpsd daemon exports data in three different ways: via a sockets
interface, via DBUS broadcasts, and via a shared-memory interface,
It is possible one or more of these may be configured out in your
installation.</p>
</div>
<div class="sect2">
<h3 id="_the_sockets_interface"><a class="link" href="#_the_sockets_interface">The sockets interface</a></h3>
<div class="paragraph">
<p>The GPSD project provides client-side libraries in C, C++, and Python
that exercise the sockets export.  A Perl module is separately
available from CPAN.  While the details of these libraries vary, they
all have the same two purposes and the same limitations.</p>
</div>
<div class="paragraph">
<p>One purpose of the libraries is to handle the details of unpacking
JSON-based wire-protocol objects into whatever native structure/record
feature your application language has. This is particularly important
in the C and C++ libraries, because those languages don&#8217;t have
good native support for JSON.</p>
</div>
<div class="paragraph">
<p>Another purpose is to hide the details of the wire protocol from the
application.  This gives the GPSD developers room to improve extend
the protocol without breaking every client application.  Depend
on wire-protocol details only at your own risk!</p>
</div>
<div class="paragraph">
<p>The limitations the libraries have to cope with are the nature of
the data flow from the sensors, and the simple fact that they&#8217;re
not necessarily delivering fixes at any given time.</p>
</div>
<div class="paragraph">
<p>For details of the libraries' APIs, see their reference
documentation; the objective of the rest of this section is to teach
you the general model of client-side interfacing that they all have to
follow because of the way the daemon works.</p>
</div>
<div class="paragraph">
<p>Each library has the following entry points:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Open a session socket to the daemon.  Named something like "open()".</p>
</li>
<li>
<p>Set watch policy. Named something like "stream()"</p>
</li>
<li>
<p>Send wire-protocol commands to the daemon. Deprecated; makes your
code dependent on the wire protocol. There is no longer a real
use case for this entry point; if you think you need no use it,
you have probably failed to understand the rest of the interface.</p>
</li>
<li>
<p>Blocking check to see if data from the daemon is waiting. Named
something like "waiting()" and taking a wait timeout as argument.
Note that choosing a wait timeout of less than twice the cycle time
of your device will be hazardous, as the receiver will probably not
supply input often enough to prevent a spurious error indication.
For the typical 1-second cycle time of GPSes this implies a minimum
2-second timeout.</p>
</li>
<li>
<p>Blocking read for data from the daemon.  Named something like "read()"
(this was "poll()" in older versions).</p>
</li>
<li>
<p>Close the session socket. Named something like "close()".</p>
</li>
<li>
<p>Enable debugging trace messages</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The fact that the data-waiting check and the read both block means
that, if your application has to deal with other input sources than
the GPS, you will probably have to isolate the read loop in a thread with
a mutex lock on the gps_data structure.</p>
</div>
<div class="paragraph">
<p>Here is a complete table of the binding entry points:</p>
</div>
<table class="tableblock frame-ends grid-all stretch">
<caption class="title">Table 1. Entry points in client bindings</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">C</th>
<th class="tableblock halign-left valign-top">C++</th>
<th class="tableblock halign-left valign-top">Python</th>
<th class="tableblock halign-left valign-top">Function</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">gps_open()</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">gpsmm.gpsmm()</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">gps._\_init__()</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">In OO languages the client class initializer opens the daemon socket.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">gps_send()</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">gpsmm.send()</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">gps.send()</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Send wire-protocol commands to the daemon. Deprecated and unstable.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">gps_stream()</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">gpsmm.stream()</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">gps.stream()</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set watch policy. What you should use instead of send().</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">gps_waiting()</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">gpsmm.waiting()</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">gps.waiting()</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Blocking check with timeout to see if input is waiting.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">gps_read()</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">gpsmm.read()</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">gps.read()</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Read data from the daemon.  Usually blocking.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">gps_unpack()</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">gps.unpack()</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Parse JSON from a specified buffer into a session structure</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">gps_close()</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">gpsmm.~gpsmm()</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">gps.close()</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Close the daemon socket and end the session.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">gps_data()</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">gpsmm.data()</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">gps.data()</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Get the contents of the client buffer.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">gps_enable_debug()</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">gpsmm_enable_debug()</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enable debug tracing.  Only useful for GPSD developers.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">gps_clear_fix()</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">gpsmm.clear_fix()</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Clear the contents of the fix structure.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The tricky part is interpreting what you get from the blocking
read. The reason it&#8217;s tricky is that you&#8217;re not guaranteed that
every read will pick up exactly one complete JSON object from the
daemon. It may grab one response object, or more than one, or
part of one, or one or more followed by a fragment.</p>
</div>
<div class="paragraph">
<p>What the library does on each read is this: get what it can from the
socket, append that to a private buffer, and then consume as many JSON
objects from the front of the buffer as it can.  Any incomplete JSON
is left in the private buffer to be completed and unpacked on a later
go-round.</p>
</div>
<div class="paragraph">
<p>In C, the library "consumes" a JSON object by unpacking its content
into a blackboard structure passed to the read entry point by
address. The structure contains a state-flag mask that you can (and
should!) check so you&#8217;ll know which parts of the structure contain
valid data.  It is safe to do nothing unless the PACKET_SET mask bit
is on, which is the library&#8217;s way of telling you that at least one
complete JSON response has arrived since the last read.</p>
</div>
<div class="paragraph">
<p>Data may accumulate on the blackboard over multiple reads,
with new TPV reports overwriting old ones; it is guaranteed that
overwrites are not partial.  Expect this pattern to be replicated
in any compiled language with only fixed-extent structures.</p>
</div>
<div class="paragraph">
<p>In Python and Perl the read entry point returns an object containing
accumulated data.  The state-flag mask is still useful for telling you
which parts contain data, and there is still a PACKET_SET bit.  Expect
this pattern to be replicated in other dynamic OO languages when we
support them.</p>
</div>
<div class="paragraph">
<p>The C++ binding is a very thin wrapper around the C.  You get back an
object, but it&#8217;s just a reference to the C blackboard structure. There&#8217;s
no unpack() method because it doesn&#8217;t fit the gpsmm object&#8217;s RAII model.</p>
</div>
<div class="paragraph">
<p>All bindings will throw a recognizable error from the read entry
point when the socket is closed from the daemon side.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
The timing of your read loop is important. When it has satellite lock,
the daemon will be writing into its end of the socket once per
whatever the normal reporting-cycle time of your device is - for a GPS
normally one peer second.  <strong>You must poll the socket more often that
that.</strong>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If necessary, spawn a worker thread to do this, mutex-locking the
structure where it outs the reports.  If you don&#8217;t do this, data
will back up in your socket buffers and position reports will be
more and more delayed until the socket FIFO fills, at which point the
daemon will conclude the client has died and drop the connection.</p>
</div>
<div class="paragraph">
<p>AIVDM clients have a longer maximum allowable poll interval, but a
problem of a different kind. you have the problem that later sentences
of (say) Type 1 don&#8217;t obsolete the data in earlier ones. This is a
problem, because the library is designed so that read calls pull any
JSON reports waiting from the daemon and interpret them all.</p>
</div>
<div class="paragraph">
<p>To avoid losing data, you want to poll the daemon more often than once
per two seconds (that being the minimum transmission period for the
most frequently shipped sentences, Type 1/2/3). That way the read
buffer will never contain both a message and a later message of the
same type that steps on it.</p>
</div>
</div>
<div class="sect2">
<h3 id="_shared_memory_interface"><a class="link" href="#_shared_memory_interface">Shared-memory interface</a></h3>
<div class="paragraph">
<p>Whenever gpsd recognizes a packet from any attached device, it writes
the accumulated state from that device to a shared memory segment.  The
C and C++ client libraries shipped with GPSD can read this segment.</p>
</div>
<div class="paragraph">
<p>The API for reading the segment uses the same gps_open(), gps_read()
and gps_close() entry points as the sockets interface. To enable using
shared memory instead, it is only necessary to use the macro constant
GPSD_SHARED_MEMORY as the host argument of gps_open().</p>
</div>
<div class="paragraph">
<p>The gps_stream(), gps_send(), gps_waiting(), and gps_data() entry
points are not available with this interface. You cannot set a device
filter on it. You will not get device activation or deactivation
notices through it.  And, of course, it is only good for local and not
networked access.  Its main advantage is that it is very fast and
lightweight, especially suitable for use in low-power embedded
deployments with a single device on a fixed port and the sockets
interface configured out.</p>
</div>
<div class="paragraph">
<p>Under the shared-memory interface, gps_read() after a successful
gps_open() will always return with data; its return is the size of a
struct gps_data_t in bytes. The 'gps_fd' member of the struct gpsdata
instance handed to you will always be -1.  The PACKET_SET flag will
always be asserted.  The other flag bits in the 'set' member will tell
you what data is updated in the instance, just as in the sockets
interface.</p>
</div>
<div class="paragraph">
<p>The shared-memory interface is not yet available from Python.</p>
</div>
</div>
<div class="sect2">
<h3 id="_d_bus_broadcasts"><a class="link" href="#_d_bus_broadcasts">D-Bus broadcasts</a></h3>
<div class="paragraph">
<p>If your system supports D-Bus, gpsd broadcasts a signal with path /org/gpsd,
interface "org.gpsd", and name "fix" whenever it received a position
report from any device attached to it.  See the gpsd(8) manual page for
details of the binary payload layout.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_c_examples"><a class="link" href="#_c_examples">C Examples</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>The source distribution includes two example clients in C;
gpxlogger.c and cgps.c.</p>
</div>
<div class="paragraph">
<p>gpxlogger.c illustrates the simplest possible program flow; open,
followed by stream, followed by the library main loop.</p>
</div>
<div class="paragraph">
<p>cgps.c shows what an interactive application using the library and
also hw processing user commands works.  Note the use of the curses
nodelay function to ensure that wgetch() does not block the GPS
polling loop.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_c_examples_2"><a class="link" href="#_c_examples_2">C++ examples</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following code skeleton implements a C++ client:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="c">int main(void)
{
    gpsmm gps_rec("localhost", DEFAULT_GPSD_PORT);

    if (gps_rec.stream(WATCH_ENABLE|WATCH_JSON) == NULL) {
        cerr &lt;&lt; "No GPSD running.\n";
        return 1;
    }

    for (;;) {
	struct gps_data_t* newdata;

	if (!gps_rec.waiting(50000000))
	  continue;

	if ((newdata = gps_rec.read()) == NULL) {
	    cerr &lt;&lt; "Read error.\n";
	    return 1;
	} else {
	    PROCESS(newdata);
	}
    }
    return 0;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note the absence of explicit open and close methods.  The object
interface is designed on the RAII (Resource Acquisition Is
Initialization) model; you close it by deallocating it.</p>
</div>
<div class="paragraph">
<p>Look at test_gpsmm.cpp in the distribution for a full example.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_python_examples"><a class="link" href="#_python_examples">Python examples</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>There&#8217;s a very simple Python example analogous to gpxlogger attached
to the source code for the gps.py library.</p>
</div>
<div class="paragraph">
<p>The heart of it is this code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="python">    session = gps(**opts)
    session.stream(WATCH_ENABLE|WATCH_NEWSTYLE)
    for report in session:
        print report</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you need to intersperse other processing in a main event loop,
like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="python">session = gps(mode=WATCH_ENABLE)
while 0 == session.read()
    if not hasattr(session, "data"):
        # no data yet
        continue;

    # Check data class for 'DEVICE' messages from gpsd.  If
    # we're expecting messages from multiple devices we should
    # inspect the message to determine which device
    # has just become available.  But if we're just listening
    # to a single device, this may do.
    if session.data['class'] == 'DEVICE':
        # Clean up our current connection.
        session.close()
        # Tell gpsd we're ready to receive messages.
        session = gps(mode=WATCH_ENABLE)
    # Do more stuff

print "GPSD has terminated"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Each call to session.read() will fill session.response with the message
just received from <strong>gpsd</strong>. If that message was gpsd JSON then the JSON
fields are decoded into session.data. When the daemon terminates,
session.read() will return non-zero, and then the loop will terminate.</p>
</div>
<div class="paragraph">
<p>The session.data object can be accessed either as a dictionary or as
an object. As a dictionary, it is the raw contents of the last JSON
response re-encoded in plain ASCII. For convenience, you may also access
it as an object with members for each attribute in the dictionary. It
is especially useful to know that the object will always have a "class"
member giving the response type (TPV, SKY, DEVICE, etc.) as a string.</p>
</div>
<div class="paragraph">
<p>See "Gpsd Client Example Code" for more client code examples.</p>
</div>
<div class="paragraph">
<p>For more interesting examples integrated with X and GTK, see xgps and
xgpsspeed.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_other_client_bindings"><a class="link" href="#_other_client_bindings">Other Client Bindings</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>There are a couple of client bindings for GPSD that are maintained
separately from the GPSD distribution. We don&#8217;t try to document their
APIs here, but just provide pointers to them.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_java"><a class="link" href="#_java">Java</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>There is a Java binding, described at <a href="http://gpsd4java.forge.hoegergroup.de/" class="bare">http://gpsd4java.forge.hoegergroup.de/</a>
This binding is available at maven central. See that web page for how
to use it in a maven build.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_perl"><a class="link" href="#_perl">Perl</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>There&#8217;s a Perl client library at <a href="http://search.cpan.org/dist/Net-GPSD3/" class="bare">http://search.cpan.org/dist/Net-GPSD3/</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_backward_incompatibility_and_future_changes"><a class="link" href="#_backward_incompatibility_and_future_changes">Backward Incompatibility and Future Changes</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>The C/C++ binding makes available two preprocessor symbols,
GPSD_API_MAJOR_VERSION and GPSD_API_MINOR_VERSION, in gps.h.
The Python module has corresponding symbols.</p>
</div>
<div class="paragraph">
<p>In major versions before 5:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>gps_open() didn&#8217;t take a third argument; instead, it returned malloc storage.</p>
</li>
<li>
<p>The 'read()' method in various bindings was named 'poll()', blocked
waiting for input, and had a different return convention. The name
'poll()' will at some point be reintroduced as an interface to the
wire-protocol POLL command.</p>
</li>
<li>
<p>Clients needed to define a hook for client-side logging if they
didn&#8217;t want code in netlib.c and libgps_core.c to occasionally send
messages to stderr.  This requirement is now gone.</p>
</li>
<li>
<p>There was a set_raw_hook() method in the C and Python bindings, now gone.
C clients should call gps_data(); the buffer is available directly in Python,
both as str (response) and bytes (bresponse).  The distinction matters
in Python 3.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2023-01-10 17:38:26 -0500
</div>
</div>
</body>
</html>